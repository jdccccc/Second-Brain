---
title: 14.结构和其他数据形式
date: 2021-08-05 18:46:51
tags: C
---

# 14.结构和其他数据形式

## 建立结构声明

```C
struct [strname]{
	typename memname;
	...
};
```

## 定义结构变量

- 声明和定义分离
- 声明和定义结合且不省略结构名
- 声明和定义结合且省略结构名



- 初始化结构
    - 和初始化数组类似
- 访问结构成员
    - .
- 结构的初始化器
    - P443

## 结构数组

## 嵌套结构

## 指向结构的指针

- ->指针访问成员

## 向函数传递结构的信息

- 传递结构成员
- 传递结构地址
- 传递结构
    - C允许把一个结构赋值给另一个结构
    - 即使成员是数组，也能完成赋值
    - 还可以把另一个结构初始化为相同类型的一个结构
    - 还可以作为返回值返回
- 复合字面量和结构(C99)
    - 语法是把类型名放在圆括号中，后面紧跟一个用花括号括起来的初始化列表，且初始化列表和普通初始化列表语法相同。
    - 复合字面量在所有函数的外部，具有静态存储期；如果复合字面量在块中，则具有自动存储期。

- 伸缩型数组成员(C99)P463
    - 必须是结构的最后一个成员
    - 结构中至少由一个成员
    - 声明类似普通数组
    - 不能用结构进行赋值或者拷贝，只能拷贝除伸缩型数组成员以外的其他成员
- 匿名结构(C11)P465

## 把结构内容保存到文件中

## 联合简介

- 关键字union替换struct，与结构的声明和定义语法相仿
- 初始化
    - 用另一个联合
    - 第一个元素
    - C99指定初始化器
- 匿名联合(C11)P473

P474总结

## 枚举简介

用枚举类型来表示整型常量

枚举符是int，但是枚举变量可以是可以存储枚举常量的任意整数类型

## 共享名称空间

- 作用域
    - 两个不同作用域的同名变量不冲突
    - 两个相同作用域的同名变量冲突
- 在特定的作用域中
    - 结构标记、联合标记、枚举标记都共享相同的名称空间，与普通变量使用的空间不同

## typedef

typedef subtype userTypeName；

##  其他复杂的声明

- 数组名后面的[]和函数名后面的()具有相同的和优先级，比*的优先级高
- []和()遵循从左往右结合

## 函数与指针

- 指向函数的指针存储着函数代码的起始处的地址
- 调用的两种方法
    - (*pf)()和pf()都可以