---
title: 11.字符串和字符串函数
date: 2021-08-05 18:45:08
tags: C
---

# 11.字符串和字符串函数

## 表示字符串和字符串I/O

字符串是以'\0'结尾的char类型数组

### 在程序中定义字符串

- 字符串字面量
    - 如果字符串字面量之间没有间隔，或者用空白字符分割，C会将其视为串联起来的字符串字面量
    - ”space farers“ 和 *”space farers“
- 字符串数组和初始化
    - 用足够空间的数组存储字符串
        - 用指定的字符串初始化
        - 也可以省略数组大小初始化
    - 还可以使用指针法创建字符串
- 数组和指针初始化法的区别
    - 初始化数组把静态存储区的字符串拷贝到数组中，而初始化指针只把字符串的地址拷贝给指针
    - 数组名是常量而指针名是变量
- 字符串数组
    - 指向字符串的指针数组
    - char类型数组的数组

## 字符串输入

### 分配空间

- 声明时显式指明数组的大小
- C库函数分配内存

### gets()与puts()

- gets函数读取整行输入直到遇到换行符然后丢弃换行符，存储其余字符，并在这些字符的末尾添加一个空字符
- puts函数与gets函数配对使用，该函数用于显示字符串并在末尾添加换行符

### fgets()与fputs()

- fgets函数的第二个参数指明读入字符的最大数量。
    - 如果该参数的值是n，fgets将读入n-1个字符，或者读到遇到的第一个换行符为止
    - fgets读到换行符会接收，不会丢弃
    - fgets函数的第三个参数指明要读入的文件
    - 返回值
        - 一切正常该函数返回和传入的第一个参数相同的地址
        - 文件结尾返回空指针
- fputs函数的第二个参数指明要输出的文件

### gets_s(words，STLEN)

- gets_s只从标准输入中读取数据，所以不需要第三个参数
- get_s读取换行符后丢弃
- P335第三点

### scanf()

%s 第一个非空白字符作为开始，下一个空白字符作为结束

## 字符串输出

### puts()

- 把字符串的地址作为参数传递
- 在显示字符串时自动在末尾添加一个换行符

### fputs()

### printf()

## 字符串函数

### strlen

- 统计字符串的长度

### strcat

- 把第二个字符串的备份附加在第一个字符串的末尾

### strncat

- 第三个参数指定了最大添加字符数

### strcmp

- 字典序比较
    - 相等返回0
    - A<B返回负值
    - A>B返回正值

### strncmp

- 第三个参数指定比较的最大长度

### strcpy

- 第二个参数指向的字符串被拷贝至第一个参数指向的字符串

### strncpy

- 第三个参数指明可拷贝的最大字符数

### sprintf

- sprintf的第一个参数是目标字符串的地址，其余参数和printf相同

### 其他

P357

## ctype.h字符函数和字符串

while(*str)循环处理str指向的字符串中的每个字符，直到遇到空字符。

## 命令行参数

```C
int main(int argc, char *argv[])
```

第一个参数是命令行的字符串数量

第二个参数是存储指向命令行参数字符串指针的数组

## 把字符串转换成数字

- atoi接受一个字符串，返回相应的整数值
    - 字符串仅以整数开头，atoi也能处理，将开头的整数转化为字符
    - 如果参数不是数字，atoi函数返回0
- strtol（const char * restrict nptr, char ** restrict endptr, int base）
    - nptr是指向待转换字符串的指针
    - endptr被设置为指向标识输入数字结束字符的地址的指针
    - base表示以什么进制写入数字

